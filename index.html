<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CrisisLens ‚Äì Verify Before You Share</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
html { scroll-behavior: smooth; }
body {
  margin:0;
  font-family:Inter,sans-serif;
  background:#f6f9fc;
  color:#0f172a;
}

/* NAVBAR */
.navbar{
  position:sticky;
  top:0;
  z-index:1000;
  background:#ffffffee;
  backdrop-filter: blur(12px);
  border-bottom:1px solid #e5e7eb;
  padding:14px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.logo{font-size:22px;font-weight:800}
.logo span{color:#2563eb}

.nav-links a{
  margin-left:26px;
  text-decoration:none;
  font-weight:600;
  color:#334155;
  padding:8px 14px;
  border-radius:10px;
}
.nav-links a:hover{
  background:#2563eb;
  color:#fff;
}

/* SECTIONS */
section{ padding:70px 20px; }
.hero{text-align:center;}
.hero h1{font-size:56px;font-weight:800;}
.hero h1 span{color:#2563eb}
.hero p{font-size:18px;color:#475569}

/* CARD */
.card{
  background:#fff;
  max-width:850px;
  margin:30px auto;
  padding:30px;
  border-radius:18px;
  box-shadow:0 15px 35px rgba(0,0,0,.08);
}
textarea{
  width:100%;
  height:150px;
  padding:16px;
  border-radius:12px;
  border:1px solid #cbd5e1;
  font-size:16px;
}
.center{text-align:center;margin-top:20px}
.btn{
  background:#2563eb;
  color:#fff;
  padding:12px 22px;
  border-radius:12px;
  border:none;
  font-weight:600;
  cursor:pointer;
}

/* RESULT */
#result{display:none;margin-top:30px}
.bar{
  height:10px;
  border-radius:10px;
  background:#e5e7eb;
  overflow:hidden;
}
.fill{
  height:100%;
  background:#2563eb;
  width:0;
  transition:width .8s ease;
}

/* SOURCES */
.source{
  padding:10px 0;
  border-bottom:1px solid #e5e7eb;
}
.source a{
  font-weight:600;
  color:#2563eb;
  text-decoration:none;
}

/* INFO */
.info{max-width:900px;margin:auto}
.info h2{font-size:36px;margin-bottom:20px}
.info p,.info li{font-size:18px;color:#475569;line-height:1.7}

/* DIVIDER */
.section-divider{
  max-width:900px;
  margin:35px auto;
  display:flex;
  align-items:center;
  gap:14px;
}
.section-divider::before,
.section-divider::after{
  content:"";
  flex:1;
  height:1px;
  background:linear-gradient(to right, transparent, #cbd5e1, transparent);
}
.section-divider span{
  font-size:12px;
  letter-spacing:1px;
  color:#64748b;
  font-weight:600;
}

/* ABOUT */
.about-card{
  max-width:900px;
  margin:30px auto;
  background:linear-gradient(180deg,#ffffff,#f8fafc);
  border-radius:20px;
  padding:45px 55px;
  box-shadow:0 20px 45px rgba(0,0,0,0.08);
  border:1px solid #e5e7eb;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<header class="navbar">
  <div class="logo">üõ°Ô∏è Crisis<span>Lens</span></div>
  <nav class="nav-links">
    <a href="#home">Home</a>
    <a href="#how">How It Works</a>
    <a href="#analyze">Analyze News</a>
    <a href="#about">About</a>
  </nav>
</header>

<!-- HOME -->
<section id="home" class="hero">
  <h1>Stop Misinformation<br><span>During Crisis</span></h1>
  <p>Real-time credibility check using live Google sources</p>
</section>

<!-- ANALYZE -->
<section id="analyze">
  <div class="card">
    <textarea id="newsInput" placeholder="Paste news text or headline here..."></textarea>
    <div class="center">
      <button class="btn" onclick="analyze()">Check Credibility</button>
    </div>

    <div id="result">
      <h3>Credibility Result</h3>
      <p><b>NLP Semantic Similarity:</b> <span id="nlpScore"></span>%</p>

      <h2 id="finalScore">--%</h2>
      <p id="statusText"></p>
      <p><b>Verified at:</b> <span id="time"></span></p>

      <p>Source Reliability</p>
      <div class="bar"><div id="b1" class="fill"></div></div>

      <p>Content Consistency</p>
      <div class="bar"><div id="b2" class="fill"></div></div>

      <p>Cross Verification</p>
      <div class="bar"><div id="b3" class="fill"></div></div>

      <h4>Live Verified Sources</h4>
      <div id="sources"></div>
    </div>
  </div>
</section>

<div class="section-divider"><span>PROCESS</span></div>

<!-- HOW -->
<section id="how">
  <div class="info">
    <h2>How CrisisLens Works</h2>
    <ul>
      <li>Live Google search using Custom Search API</li>
      <li>Multiple-source cross verification</li>
      <li>Trusted-domain weighting</li>
      <li>Transparent credibility indicators</li>
    </ul>
  </div>
</section>

<div class="section-divider"><span>DETAILS</span></div>

<!-- ABOUT -->
<section id="about">
  <div class="about-card">
    <h2>About CrisisLens</h2>
    <p>
      CrisisLens verifies breaking news during emergencies by performing
      real-time Google searches and cross-checking multiple trusted sources.
      <br><br>
      It provides credibility indicators instead of blind yes/no answers.
    </p>
  </div>
</section>

<!-- SCRIPT -->
<script>
async function analyze() {
  const text = document.getElementById("newsInput").value.trim();
  if (!text) {
    alert("Paste news first");
    return;
  }

  document.getElementById("result").style.display = "block";
  document.getElementById("finalScore").innerText = "Checking‚Ä¶";
  document.getElementById("statusText").innerText = "";
  document.getElementById("time").innerText = "";
  document.getElementById("nlpScore").innerText = "";
  document.getElementById("sources").innerHTML = "";

  let res;
  try {
    res = await fetch("/api/verify", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });
  } catch (err) {
    document.getElementById("finalScore").innerText = "Network Error";
    return;
  }

  let data;
  try {
    data = await res.json();
  } catch (err) {
    document.getElementById("finalScore").innerText = "Invalid API response";
    return;
  }

  if (data.error) {
    document.getElementById("finalScore").innerText = "Error";
    document.getElementById("statusText").innerText = data.error;
    return;
  }

  /* ‚úÖ UPDATE UI (ONCE, CLEANLY) */
  document.getElementById("finalScore").innerText = data.score + "%";
  document.getElementById("statusText").innerText = data.label;
  document.getElementById("time").innerText = data.verifiedAt;
  document.getElementById("nlpScore").innerText = data.nlpSimilarity;

  document.getElementById("b1").style.width = data.score + "%";
  document.getElementById("b2").style.width = Math.max(data.score - 10, 0) + "%";
  document.getElementById("b3").style.width = Math.max(data.score - 20, 0) + "%";

  if (Array.isArray(data.sources)) {
    data.sources.forEach(s => {
      document.getElementById("sources").innerHTML += `
        <div class="source">
          <a href="${s.link}" target="_blank">${s.title}</a>
          <p>${s.snippet}</p>
        </div>
      `;
    });
  }
}
</script>

</body>
</html>
